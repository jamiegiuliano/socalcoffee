---
layout: default
---

<section class="hero hero-sm hero-blue fill-white xs-mb0">
  <div class="wrapper">
    <div class="hero-inner">
      <h1 class="text-primary bold xs-pb0">Brewing With <br/>{{ page.title }}</h1>
    </div>
  </div>
</section>

<section class="xs-inline-block">
  <div class="wrapper">
    <div id="Container" class="container gutters">
      <div class="col xs-col-12 md-col-4 md-col-3 xs-mb5">
        <div class="card">
          {% for item in page.ingredients %}
            {% if item.type == 'number' or item.type == 'text' %}
              <fieldset class="">
                <legend>{{ item.label }}  {% if item.locked %}{% else %}<u>Edit</u>{% endif %}</legend>
                <label for="{{ item.label | downcase | remove: " " }}" class="hide">{{ item.label }}</label>
                <input id='{{ item.id }}' class="{{ item.class }} {% if item.locked %}disabled{% endif %}" value="{{ item.value }}" placeholder="{{ item.value }}" type="{{ item.type }}" onkeyup="{{ page.function }}" onchange="{{ page.function }}" {% if item.locked %}disabled{% endif %}>
              </fieldset>
            {% elsif item.type == 'slider' %}

              <fieldset class="">
                <legend>{{ item.label }}  <u>Drag</u></legend>
                <label for="{{ item.label | downcase | remove: " " }}" class="hide">{{ item.label }}</label>
                {% if item.show_images %}
                  <div class="slider-image">
                    <img src="/assets/images/frenchpress-4cup.svg" alt="">
                    <img src="/assets/images/frenchpress-8cup.svg" alt="">
                    <img src="/assets/images/frenchpress-12cup.svg" alt="">
                  </div>
                {% endif %}
                <input id='{{ item.id }}' class="{{ item.class }}{% if item.show_images %} slider-image-mod{% endif %}" value="{{ item.value }}" min="{{ item.min }}" max="{{ item.max }}" step="{{ item.step }}" type="range" oninput="{{ page.function }}" >
                <output for='{{ item.id }}' id='{{ item.id }}-output'>
              </fieldset>
            {% endif %}

          {% endfor %}
          <fieldset class="">
            <legend>Equipment</legend>
            <div class="list">
              {% for item in page.equipment %}
                <p class="bold comma-item"><a href="{{ item.link }}" class=" xs-inline-block">{{ item.name }}</a></p>
              {% endfor %}
            </div>
          </fieldset>
        </div>

      </div>
      <div class="col xs-col-12 md-col-6 md-offset-1 md-col-7 md-offset-1">
        <div class="">
          <div id="Filters" class="controls lg-col-10 hide">
            <fieldset class="gutters">
              <a class="col filter active" data-filter=".filtershort" >
                <p class="text-3 button bold text-primary">Short Steps</p>
              </a>
              <a class="col filter" data-filter=".filterlong" >
                <p class="text-3 button bold text-primary">Long Steps</p>
              </a>
            </fieldset>
          </div>
          <div id="Container" class="container gutters">
            <div class="col xs-col-12 recipe-hero-outer">
              <img class="recipe-hero" src="{{ page.background }}" alt="">

            </div>
            <div class="mix col xs-col-12 filtershort">
              {% for item in page.short_steps %}
                <div class="xs-flex xs-flex-align-center xs-flex-column xs-pb5">
                  <h4 class="xs-pb0 text-primary-lighter underline xs-text-center">{{ item.label }}</h4>
                  <h3 class="xs-py1 xs-text-center">{{ item.text }}</h3>
                  <h1 class="xs-pb0 xs-text-center"><strong class="{{ item.class }}">{{ item.number }}</strong>{% if item.number != '' %}g{% endif %}</h1>
                </div>
              {% endfor %}
            </div>
            <div class="mix col xs-col-12 filterlong">
              <p>{{ page.long_steps | markdownify }}</p>
            </div>
          </div>
        </div>

      </div>
      <div class="col xs-col-12">
        <div class="card xs-mt2 xs-py5 xl-py6">
          <div class="xs-flex xs-my5 xl-my6 xs-flex-align-center xs-flex-column">
            <h1 class="xs-pb0">‚òïÔ∏è üòå ü§ô</h1>
            <h2 class="xs-py1 xs-text-center">Enjoy The Coffee</h2>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% include /scripts/recipes-js.html %}

<script type="text/javascript">
  // Top Level Variables
  RATIO = {% if page.ratio %}{{ page.ratio }}{% else %}14{% endif %}
  BYPASS = 4.82

  function outputUpdate(vol) {
    document.querySelector('#frenchpress-container-output').value = vol;
  }

  function changeFormById(id, attr, value) {
    value = Math.round(value)
    document.getElementById(id).setAttribute(attr,value);
  }

  function changeById(id, el) {
    document.getElementById(id).innerHTML = Math.round(el)
  }

  function changeByClass(html, selector, el) {
    let selectorStr = html + "." + selector
    let selectors = document.querySelectorAll(selectorStr)
    selectors.forEach(function(selectors) {
      selectors.innerHTML = Math.round(el)
    })
  }

  // =============
  // Chemex Recipe
  {% if page.function == 'chemexmath()' %}
    function chemexmath() {
      var c = document.querySelector("input.chemex-coffee").value
      var w = c * RATIO
      var bypass = w / BYPASS
          w = w + bypass
      var preinfuse = c * 2
      var goal = w - bypass - preinfuse
      var pour = goal / 4
      var pour1 = pour * 2
      var pour2 = pour * 4

      changeByClass("strong", "chemex-coffeegrams", c)
      changeFormById("chemex-water", 'value', w)
      changeByClass("strong", "chemex-bypass", bypass)
      changeByClass("strong", "chemex-preinfuse", preinfuse)
      changeByClass("strong", "chemex-pour1", pour1)
      changeByClass("strong", "chemex-pour2", pour2)
    }

    chemexmath()
  {% endif %}

  // =============
  // Chemex Recipe
  {% if page.function == 'pourovermath()' %}
    function pourovermath() {
      var c = document.querySelector("input.pourover-coffee").value
      var w = c * RATIO
      var preinfuse = c * 2
      var pour1 = c * 5
      var pour2 = c * 8.3333333333
      var pour3 = c * 11.6666666667

      changeByClass("strong", "pourover-coffeegrams", c)
      changeFormById("pourover-water", 'value', w)
      changeByClass("strong", "pourover-preinfuse", preinfuse)
      changeByClass("strong", "pourover-pour1", pour1)
      changeByClass("strong", "pourover-pour2", pour2)
      changeByClass("strong", "pourover-pour3", pour3)
    }

    pourovermath()
  {% endif %}


  // =============
  // frenchpress Recipe
  {% if page.function == 'frenchpressmath()' %}
    function frenchpressmath() {
      var vol = document.querySelector("input.frenchpress-container").value
      var volInterpret = vol === '1' ? 16 : vol === '2' ? 32 : vol === '3' ? 51 : 24
      var volCups = volInterpret / 4
      var volStr = `${volInterpret} oz (${volCups} cups)`
      var mlConvert = 29.5757
      var w = Math.round(volInterpret * mlConvert)
      var c = w / 15
      var preinfuse = c * 2
      var pour1 = (w) - preinfuse

      outputUpdate(volStr)
      changeFormById("frenchpress-coffee", 'value', c)
      changeFormById("frenchpress-water", 'value', w)
      changeByClass("strong", "frenchpress-coffee", c)
      changeByClass("strong", "frenchpress-preinfuse", preinfuse)
      changeByClass("strong", "frenchpress-pour1", pour1)
    }

    frenchpressmath()
  {% endif %}


  // =============
  // aeropress Recipe
  {% if page.function == 'aeropressmath()' %}
    function aeropressmath() {
      var c = document.querySelector("input.aeropress-coffee").value
      var w = c * RATIO
      var pour = w

      changeFormById("aeropress-water", 'value', w)
      changeByClass("strong", "aeropress-pour", pour)
    }

    aeropressmath()
  {% endif %}


</script>
